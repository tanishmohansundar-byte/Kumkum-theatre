<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Kumkum Theatre</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #fff8dc; 
      color: #222;
      overflow-y: scroll;
      scrollbar-width: thin;
      scrollbar-color: darkblue #fff8dc;
    }
    ::-webkit-scrollbar { width: 10px; }
    ::-webkit-scrollbar-thumb { background: darkblue; border-radius: 5px; }
    ::-webkit-scrollbar-track { background: #fff8dc; }
    .screen { display: none; padding: 40px; text-align: center; min-height: 100vh; }
    .active { display: block; }
    h1,h2 { margin-bottom: 20px; }
    button {
      padding: 12px 20px;
      margin: 8px;
      font-size: 16px;
      cursor: pointer;
      border: none;
      border-radius: 8px;
      background: darkblue;
      color: white;
      transition: 0.3s;
    }
    button:hover { background: #003366; }
    .seat {
      width: 40px; height: 40px; margin: 5px;
      border-radius: 6px; border: 1px solid #222;
      cursor: pointer; display: inline-block;
      vertical-align: middle; line-height: 40px;
    }
    .selected { background: green; color: white; }
    .recliner { background: #d2b48c; }
    .summary {
      text-align: left; display: inline-block;
      background: #f9f9f9; padding: 20px;
      border-radius: 12px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    .food-item { margin: 10px; }
    .food-item input { width: 50px; text-align: center; }
  </style>
</head>
<body>

<!-- Screen 1 -->
<div id="screen1" class="screen active">
  <h1>üé¨ Welcome to Kumkum Theatre üé¨</h1>
  <button onclick="nextScreen(2)">Continue</button>
</div>

<!-- Screen 2: Director -->
<div id="screen2" class="screen">
  <h2>Choose Director</h2>
  <div id="director-options"></div>
  <button onclick="prevScreen(1)">Back</button>
</div>

<!-- Screen 3: Movies -->
<div id="screen3" class="screen">
  <h2>Select Movie</h2>
  <div id="movie-options"></div>
  <button onclick="prevScreen(2)">Back</button>
</div>

<!-- Screen 4: Show Timing -->
<div id="screen4" class="screen">
  <h2>Select Show Timing</h2>
  <div id="timing-options"></div>
  <button onclick="prevScreen(3)">Back</button>
</div>

<!-- Screen 5: Seat Selection -->
<div id="screen5" class="screen">
  <h2>Select Seats</h2>
  <div id="seat-map"></div>
  <p id="seat-info"></p>
  <button onclick="proceedSeats()">Continue</button>
  <button onclick="prevScreen(4)">Back</button>
</div>

<!-- Screen 6: Details -->
<div id="screen6" class="screen">
  <h2>Enter Your Details</h2>
  <input id="name" placeholder="Name"><br><br>
  <input id="phone" placeholder="Phone"><br><br>
  <input id="email" placeholder="Email"><br><br>
  <input id="card" placeholder="Credit Card Number"><br><br>
  <button onclick="saveDetails()">Continue</button>
  <button onclick="prevScreen(5)">Back</button>
</div>

<!-- Screen 7: Beverages -->
<div id="screen7" class="screen">
  <h2>Do you want beverages?</h2>
  <button onclick="selectBeverages(true)">Yes</button>
  <button onclick="selectBeverages(false)">No</button>
  <button onclick="prevScreen(6)">Back</button>
</div>

<!-- Screen 8: Beverages Options -->
<div id="screen8" class="screen">
  <h2>Select Food & Beverages</h2>
  <div id="food-options"></div>
  <button onclick="proceedBeverages()">Continue</button>
  <button onclick="prevScreen(7)">Back</button>
</div>

<!-- Screen 9: Summary -->
<div id="screen9" class="screen">
  <h2>Booking Summary</h2>
  <div id="summary" class="summary"></div><br>
  <button id="confirmBtn">Confirm</button>
  <button onclick="prevScreen(8)">Back</button>
</div>

<!-- Screen 10: Confirmation -->
<div id="screen10" class="screen">
  <h2>‚úÖ Booking Confirmed!</h2>
  <div id="ticket" class="summary"></div><br>
  <div id="qrcode"></div><br>
  <button onclick="nextScreen(11)">Finish</button>
</div>

<!-- Screen 11: Thanks -->
<div id="screen11" class="screen">
  <h1>üôè Thanks for using Kumkum Theatre! üôè</h1>
</div>

<script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>
<script>
const directors = {
  KUTE: ["MARUTHUVAR","HIT","DOOR","DOOR2","SPY"],
  GA: ["BISTER","THOZHAM","HOSPA","AIM","ONE LIFE"],
  SORUS: ["HARBOUR","AUTOKARAN","USPA","USPA 2"],
  TANISH: ["MUJAHIDEEN","MUJAHIDEEN2"],
  POPE: ["THALAIVA","ALLA RETURNS"],
  MINE: ["FERNANDEZ","VANAKKAM MADURAI"],
  DUTE: ["DEVIL"]
};

// Show timings and screens per movie
const movieShows = {
  "MARUTHUVAR":[{time:"12:00",screen:"Screen 1 (IMAX)"},{time:"15:00",screen:"Screen 2 (3D)"},{time:"18:30",screen:"Screen 3 (LUXE)"},{time:"21:00",screen:"Screen 4 (4DX)"}],
  "HIT":[{time:"11:00",screen:"Screen 1 (ICE)"},{time:"14:00",screen:"Screen 2 (LUXE)"},{time:"20:00",screen:"Screen 3 (IMAX)"}],
  "SPY":[{time:"12:30",screen:"Screen 2 (3D)"},{time:"19:00",screen:"Screen 4 (4DX)"}],
  "MUJAHIDEEN":[{time:"10:00",screen:"Screen 5 (ICE)"},{time:"22:00",screen:"Screen 1 (IMAX)"}],
  "THALAIVA":[{time:"13:00",screen:"Screen 2 (LUXE)"},{time:"17:00",screen:"Screen 3 (IMAX)"}]
};

// Food options
const foodItems = [
  {name:"Popcorn",price:50},
  {name:"Coca Cola",price:40},
  {name:"Pepsi",price:40},
  {name:"French Fries",price:70},
  {name:"Nachos",price:80},
  {name:"Magnum Ice Cream",price:120}
];

let booking = { director:"", movie:"", show:{}, seats:[], details:{}, food:[], price:0 };

function nextScreen(n){ document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active")); document.getElementById("screen"+n).classList.add("active"); }
function prevScreen(n){ nextScreen(n); }

// Director buttons
const dirDiv=document.getElementById("director-options");
for(let d in directors){
  let btn=document.createElement("button");
  btn.textContent=d;
  btn.onclick=()=>{ booking.director=d; showMovies(d); };
  dirDiv.appendChild(btn);
}

function showMovies(d){
  let movDiv=document.getElementById("movie-options"); movDiv.innerHTML="";
  directors[d].forEach(m=>{
    let b=document.createElement("button"); b.textContent=m; b.onclick=()=>{ booking.movie=m; showTimings(m); };
    movDiv.appendChild(b);
  });
  nextScreen(3);
}

function showTimings(m){
  let tDiv=document.getElementById("timing-options"); tDiv.innerHTML="";
  let shows=movieShows[m]||[{time:"12:00",screen:"Screen 1 (Standard)"}];
  shows.forEach(s=>{
    let b=document.createElement("button");
    b.textContent=`${s.time} - ${s.screen}`;
    b.onclick=()=>{ booking.show=s; buildSeats(); nextScreen(5); };
    tDiv.appendChild(b);
  });
  nextScreen(4);
}

// Seats
function buildSeats(){
  let seatDiv=document.getElementById("seat-map"); seatDiv.innerHTML="";
  let rows=["A","B","C","D","E","F"];
  rows.forEach(r=>{
    for(let j=1;j<=8;j++){
      let seat=document.createElement("div");
      seat.className="seat";
      seat.textContent=r+j;
      if(r==="F") seat.classList.add("recliner");
      seat.onclick=()=>toggleSeat(seat);
      seatDiv.appendChild(seat);
    }
    seatDiv.appendChild(document.createElement("br"));
  });
}
function toggleSeat(seat){
  if(seat.classList.contains("selected")){
    seat.classList.remove("selected");
    booking.seats=booking.seats.filter(s=>s!==seat.textContent);
  } else {
    seat.classList.add("selected");
    booking.seats.push(seat.textContent);
  }
  document.getElementById("seat-info").textContent="Selected: "+booking.seats.join(", ");
}
function proceedSeats(){ nextScreen(6); }

// Details
function saveDetails(){
  booking.details={
    name:document.getElementById("name").value,
    phone:document.getElementById("phone").value,
    email:document.getElementById("email").value,
    card:document.getElementById("card").value
  };
  nextScreen(7);
}

// Beverages
function selectBeverages(choice){ choice? buildFoodOptions(): showSummary(); }
function buildFoodOptions(){
  let fDiv=document.getElementById("food-options"); fDiv.innerHTML="";
  foodItems.forEach(f=>{
    let div=document.createElement("div");
    div.className="food-item";
    div.innerHTML=`${f.name} (${f.price} lators) <input type="number" min="0" value="0" id="food-${f.name}">`;
    fDiv.appendChild(div);
  });
  nextScreen(8);
}
function proceedBeverages(){
  booking.food=[];
  foodItems.forEach(f=>{
    let qty=parseInt(document.getElementById("food-"+f.name).value)||0;
    if(qty>0) booking.food.push({name:f.name,qty:qty,price:f.price});
  });
  showSummary();
}

function showSummary(){
  let price=200*booking.seats.length;
  booking.seats.forEach(s=>{
    if(s.startsWith("E")) price+=50; // last row
    if(s.startsWith("F")) price+=100; // recliner
  });
  // screen surcharge
  if(booking.show.screen.includes("IMAX")||booking.show.screen.includes("LUXE")||booking.show.screen.includes("3D")||booking.show.screen.includes("4DX")||booking.show.screen.includes("ICE")){
    price+=370;
  }
  booking.food.forEach(f=> price+=f.qty*f.price );
  booking.price=price;
  let sum=document.getElementById("summary");
  sum.innerHTML=`<b>Director:</b> ${booking.director}<br>
  <b>Movie:</b> ${booking.movie}<br>
  <b>Show:</b> ${booking.show.time} - ${booking.show.screen}<br>
  <b>Seats:</b> ${booking.seats.join(", ")}<br>
  <b>Food:</b> ${booking.food.map(f=>f.name+" x"+f.qty).join(", ")||"None"}<br>
  <b>Total:</b> ${booking.price} lators`;
  nextScreen(9);
}

document.getElementById("confirmBtn").onclick=function(){
  let t=document.getElementById("ticket");
  t.innerHTML=`üéü <b>Kumkum Theatre Ticket</b><br>
  Movie: ${booking.movie}<br>
  Director: ${booking.director}<br>
  Show: ${booking.show.time} - ${booking.show.screen}<br>
  Seats: ${booking.seats.join(", ")}<br>
  Name: ${booking.details.name}<br>
  Total Paid: ${booking.price} lators`;
  document.getElementById("qrcode").innerHTML="";
  let qrText=`Kumkum Theatre\nMovie: ${booking.movie}\nDirector: ${booking.director}\nShow: ${booking.show.time} - ${booking.show.screen}\nSeats: ${booking.seats.join(", ")}\nName: ${booking.details.name}\nPrice: ${booking.price} lators`;
  new QRCode(document.getElementById("qrcode"),{ text:qrText, width:150, height:150 });
  nextScreen(10);
};
</script>
</body>
</html>

