<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Kumkum Theatre</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #fff8dc; /* faint yellow */
      color: #222;
      overflow-x: hidden;
    }

    .container {
      max-width: 800px;
      margin: auto;
      padding: 20px;
      text-align: center;
    }

    h1, h2 {
      margin-bottom: 20px;
    }

    button {
      background: #ff9800;
      border: none;
      color: white;
      padding: 12px 20px;
      margin: 10px;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    button:hover {
      background: #e68900;
    }

    input {
      padding: 10px;
      margin: 8px;
      width: 70%;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 14px;
    }

    .seats {
      display: grid;
      grid-template-columns: repeat(8, 1fr);
      gap: 8px;
      justify-content: center;
      margin: 20px 0;
    }

    .seat {
      width: 40px;
      height: 40px;
      background: #ddd;
      border-radius: 6px;
      line-height: 40px;
      cursor: pointer;
      font-size: 14px;
    }

    .seat.selected {
      background: #4caf50;
      color: white;
    }

    .seat.booked {
      background: #999;
      cursor: not-allowed;
    }

    .seat.recliner {
      background: #ffcc80;
    }

    .seat.last-row {
      border: 2px solid #000;
    }

    .scrollbar::-webkit-scrollbar {
      width: 10px;
    }
    .scrollbar::-webkit-scrollbar-thumb {
      background: darkblue;
      border-radius: 5px;
    }
  </style>
</head>
<body>
  <div class="container scrollbar" id="app"></div>

  <script>
    const app = document.getElementById("app");
    let booking = {};
    let bookedSeats = [];

    function render(content) {
      app.innerHTML = content;
    }

    // Screen 1: Welcome
    function showWelcome() {
      render(`
        <h1>Welcome to Kumkum Theatre</h1>
        <button onclick="chooseDirector()">Continue</button>
      `);
    }

    // Screen 2: Choose Director
    function chooseDirector() {
      const directors = ["kute","ga","sorus","tanish","pope","mine","dute"];
      render("<h2>Choose Director</h2>" + 
        directors.map(d => `<button onclick="chooseMovie('${d}')">${d.toUpperCase()}</button>`).join(""));
    }

    // Screen 3: Choose Movie
    function chooseMovie(director) {
      booking.director = director;
      let movies = [];
      if (director === "kute") movies = ["maruthuvar","hit","door","door2","spy"];
      else if (director === "ga") movies = ["bister","thozham","hospa","aim","one life"];
      else if (director === "sorus") movies = ["harbour","autokaran","uspa","uspa 2","uspa 3","uspa 4","hosaranga","hosaranga2","hosaranga3","mixed emotions","johnson ducknail","magadi"];
      else if (director === "tanish") movies = ["mujahideen","mujahideen2","mujahideen3"];
      else if (director === "pope") movies = ["thalaiva","alla returns"];
      else if (director === "mine") movies = ["fernandez","vanakkam madurai"];
      else if (director === "dute") movies = ["devil"];

      render("<h2>Choose Movie</h2>" +
        movies.map(m => `<button onclick="askDetails('${m}')">${m.toUpperCase()}</button>`).join(""));
    }

    // Screen 4: Enter Details
    function askDetails(movie) {
      booking.movie = movie;
      render(`
        <h2>Enter Your Details</h2>
        <input id="name" placeholder="Name"><br>
        <input id="phone" placeholder="Phone"><br>
        <input id="email" placeholder="Email"><br>
        <input id="card" placeholder="Credit Card Number"><br>
        <input id="people" type="number" min="1" placeholder="Number of People"><br>
        <button onclick="seatSelection()">Next</button>
      `);
    }

    // Screen 5: Seat Selection
    function seatSelection() {
      booking.name = document.getElementById("name").value;
      booking.phone = document.getElementById("phone").value;
      booking.email = document.getElementById("email").value;
      booking.card = document.getElementById("card").value;
      booking.people = parseInt(document.getElementById("people").value);
      booking.seats = [];

      let seats = "";
      for (let i=1;i<=40;i++) {
        let cls = "seat";
        if (i>32) cls += " last-row";
        if ([5,6,7,8].includes(i)) cls += " recliner";
        seats += `<div class="${cls}" onclick="selectSeat(${i})">${i}</div>`;
      }
      render(`
        <h2>Select Seats</h2>
        <p>Select exactly ${booking.people} seat(s)</p>
        <div class="seats">${seats}</div>
        <button onclick="askBeverages()">Next</button>
      `);
      markBookedSeats();
    }

    function selectSeat(num) {
      let el = [...document.getElementsByClassName("seat")].find(s => s.textContent==num);
      if (el.classList.contains("booked")) return;
      if (booking.seats.includes(num)) {
        booking.seats = booking.seats.filter(s=>s!==num);
        el.classList.remove("selected");
      } else {
        if (booking.seats.length < booking.people) {
          booking.seats.push(num);
          el.classList.add("selected");
        }
      }
    }

    function markBookedSeats() {
      bookedSeats.forEach(num => {
        let el = [...document.getElementsByClassName("seat")].find(s => s.textContent==num);
        if (el) el.classList.add("booked");
      });
    }

    // Screen 6: Beverages
    function askBeverages() {
      render(`
        <h2>Do you want Beverages?</h2>
        <button onclick="selectBeverages()">Yes</button>
        <button onclick="showConfirmation()">No</button>
      `);
    }

    function selectBeverages() {
      render(`
        <h2>Select Beverages</h2>
        <button onclick="toggleBeverage('Popcorn')">Popcorn</button>
        <button onclick="toggleBeverage('Coca Cola')">Coca Cola</button>
        <button onclick="toggleBeverage('Pepsi')">Pepsi</button>
        <button onclick="toggleBeverage('French Fries')">French Fries</button>
        <button onclick="toggleBeverage('Nachos')">Nachos</button>
        <br><br>
        <button onclick="showConfirmation()">Continue</button>
      `);
      booking.beverages = [];
    }

    function toggleBeverage(item) {
      if (!booking.beverages) booking.beverages = [];
      if (booking.beverages.includes(item)) {
        booking.beverages = booking.beverages.filter(b => b !== item);
      } else {
        booking.beverages.push(item);
      }
    }

    // Pricing
    function calculatePrice() {
      let base = 200;
      if (booking.director === "tanish" && ["spy","aim","magadi"].includes(booking.movie)) {
        base = 300;
      }
      let total = base * booking.people;

      booking.seats.forEach(num=>{
        if ([5,6,7,8].includes(num)) total += 100; // recliner
        if (num>32) total += 50; // last row
      });

      if (booking.beverages) total += booking.beverages.length * 50;

      booking.price = total + " lators";
    }

    // Screen 7: Confirmation
    function showConfirmation() {
      calculatePrice();
      bookedSeats.push(...booking.seats);

      render(`
        <h2>Booking Confirmed ðŸŽ‰</h2>
        <p><b>Name:</b> ${booking.name}</p>
        <p><b>Director:</b> ${booking.director.toUpperCase()}</p>
        <p><b>Movie:</b> ${booking.movie.toUpperCase()}</p>
        <p><b>Seats:</b> ${booking.seats.join(", ")}</p>
        <p><b>Beverages:</b> ${booking.beverages ? booking.beverages.join(", ") : "None"}</p>
        <p><b>Total Price:</b> ${booking.price}</p>
        <button onclick="showWelcome()">Book Again</button>
      `);
    }

    showWelcome();
  </script>
</body>
</html>
