<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kumkum Theatre</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #fff8dc;
      color: #222;
    }
    .container {
      text-align: center;
      padding: 30px;
    }
    h1, h2 {
      margin-bottom: 20px;
    }
    button {
      padding: 12px 20px;
      margin: 10px;
      border: none;
      border-radius: 8px;
      background: #ffcc00;
      font-size: 16px;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover { background: #ffaa00; }

    /* Seat screen themes */
    .seat-screen-standard { background: lightblue; }
    .seat-screen-ice { background: #39ff14; color: black; }
    .seat-screen-4dx { background: green; color: white; }
    .seat-screen-imax { background: darkblue; color: white; }
    .seat-screen-3d { background: red; color: white; }
    .seat-screen-luxe { background: goldenrod; color: black; }

    /* Posters */
    .movie-poster {
      width: 180px;
      height: 260px;
      object-fit: cover;
      border-radius: 12px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }
    .poster-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
    }
    .poster-card {
      text-align: center;
    }

    .qr-container { margin-top: 20px; }
  </style>
</head>
<body>
  <div id="app"></div>

  <script>
    const app = document.getElementById("app");

    // üé¨ Movies
    const movies = [
      {
        title: "Maruthuvar", poster: "https://m.media-amazon.com/images/I/81Q9z3g+7eL._AC_UF894,1000_QL80_.jpg",
        shows: [
          { time: "10:00 AM", screen: "Standard" },
          { time: "1:00 PM", screen: "3D" },
          { time: "4:00 PM", screen: "IMAX" },
          { time: "8:00 PM", screen: "LUXE" }
        ]
      },
      {
        title: "Spy", poster: "https://m.media-amazon.com/images/I/81u6mmsH0IL._AC_UF894,1000_QL80_.jpg",
        shows: [
          { time: "9:00 AM", screen: "Standard" },
          { time: "12:30 PM", screen: "4DX" },
          { time: "5:00 PM", screen: "ICE" },
          { time: "9:30 PM", screen: "IMAX" }
        ]
      },
      {
        title: "Jai Bhim", poster: "https://upload.wikimedia.org/wikipedia/en/5/59/Jai_Bhim_film_poster.jpg",
        shows: [
          { time: "11:00 AM", screen: "Standard" },
          { time: "2:00 PM", screen: "3D" },
          { time: "6:00 PM", screen: "4DX" },
          { time: "10:00 PM", screen: "IMAX" }
        ]
      },
      {
        title: "Naidus Padam", poster: "https://m.media-amazon.com/images/I/81Z7Vyd4C5L._AC_UF894,1000_QL80_.jpg",
        shows: [
          { time: "9:30 AM", screen: "Standard" },
          { time: "1:00 PM", screen: "ICE" },
          { time: "4:30 PM", screen: "Standard" },
          { time: "8:30 PM", screen: "3D" }
        ]
      },
      {
        title: "Detective", poster: "https://upload.wikimedia.org/wikipedia/en/a/a5/Detective_film_poster.jpg",
        shows: [
          { time: "10:30 AM", screen: "Standard" },
          { time: "2:30 PM", screen: "3D" },
          { time: "6:30 PM", screen: "IMAX" },
          { time: "9:45 PM", screen: "LUXE" }
        ]
      },
      {
        title: "Johnson Ducknail", poster: "https://via.placeholder.com/180x260?text=Johnson+Ducknail",
        shows: [
          { time: "9:45 AM", screen: "Standard" },
          { time: "1:15 PM", screen: "3D" },
          { time: "6:00 PM", screen: "ICE" },
          { time: "10:15 PM", screen: "4DX" }
        ]
      }
    ];

    const beverages = [
      { name: "Popcorn", price: 100 },
      { name: "Coca Cola", price: 80 },
      { name: "Pepsi", price: 80 },
      { name: "French Fries", price: 120 },
      { name: "Nachos", price: 150 },
      { name: "Magnum Ice Cream", price: 200 }
    ];

    let selectedMovie = null;
    let selectedShow = null;
    let selectedSeats = [];
    let selectedSnacks = [];
    let historyStack = [];

    function navigate(screenFn) {
      historyStack.push(screenFn);
      screenFn();
    }

    function goBack() {
      historyStack.pop();
      if (historyStack.length > 0) {
        historyStack[historyStack.length - 1]();
      } else {
        loadWelcome();
      }
    }

    function loadWelcome() {
      historyStack = [];
      app.className = "";
      app.innerHTML = `
        <div class="container">
          <h1>Welcome to Kumkum Theatre üé•</h1>
          <button onclick="navigate(loadMovies)">Continue</button>
        </div>
      `;
    }

    function loadMovies() {
      app.className = "";
      app.innerHTML = `<div class="container"><h2>Select Your Movie</h2><div class="poster-container"></div><button onclick="goBack()">‚¨Ö Back</button></div>`;
      const container = document.querySelector(".poster-container");
      movies.forEach((m, i) => {
        container.innerHTML += `
          <div class="poster-card">
            <img src="${m.poster}" alt="${m.title}" class="movie-poster"/>
            <p>${m.title}</p>
            <button onclick="selectMovie(${i})">Select</button>
          </div>
        `;
      });
    }

    function selectMovie(i) {
      selectedMovie = movies[i];
      navigate(loadShowTimings);
    }

    function loadShowTimings() {
      app.className = "";
      app.innerHTML = `<div class="container"><h2>Choose Show for ${selectedMovie.title}</h2>`;
      selectedMovie.shows.forEach((s, i) => {
        app.innerHTML += `<button onclick="selectShow(${i})">${s.time} - ${s.screen}</button>`;
      });
      app.innerHTML += `<br><button onclick="goBack()">‚¨Ö Back</button></div>`;
    }

    function selectShow(i) {
      selectedShow = selectedMovie.shows[i];
      navigate(loadSeatSelection);
    }

    function loadSeatSelection() {
      const screenType = selectedShow.screen.toLowerCase();
      app.className = `seat-screen-${screenType}`;
      app.innerHTML = `<div class="container"><h2>Select Your Seats (${selectedShow.screen})</h2>`;
      for (let i = 1; i <= 20; i++) {
        app.innerHTML += `<button onclick="toggleSeat(${i})">Seat ${i}</button>`;
      }
      app.innerHTML += `<br><button onclick="navigate(loadSnacks)">Continue</button>`;
      app.innerHTML += `<br><button onclick="goBack()">‚¨Ö Back</button></div>`;
    }

    function toggleSeat(seat) {
      if (selectedSeats.includes(seat)) {
        selectedSeats = selectedSeats.filter(s => s !== seat);
      } else {
        selectedSeats.push(seat);
      }
    }

    function loadSnacks() {
      app.className = "";
      app.innerHTML = `<div class="container"><h2>Snacks & Beverages</h2>`;
      beverages.forEach((b, i) => {
        app.innerHTML += `<button onclick="toggleSnack(${i})">${b.name} - ${b.price} lators</button>`;
      });
      app.innerHTML += `<br><button onclick="navigate(loadConfirmation)">Proceed to Confirmation</button>`;
      app.innerHTML += `<br><button onclick="goBack()">‚¨Ö Back</button></div>`;
    }

    function toggleSnack(i) {
      if (selectedSnacks.includes(beverages[i])) {
        selectedSnacks = selectedSnacks.filter(s => s !== beverages[i]);
      } else {
        selectedSnacks.push(beverages[i]);
      }
    }

    function loadConfirmation() {
      app.className = "";
      let basePrice = 200;
      if (["IMAX", "4DX", "ICE", "LUXE", "3D"].includes(selectedShow.screen)) {
        basePrice += 370;
      }
      let total = basePrice * selectedSeats.length;
      selectedSnacks.forEach(s => total += s.price);

      app.innerHTML = `
        <div class="container">
          <h2>Booking Confirmation üéüÔ∏è</h2>
          <p><strong>Movie:</strong> ${selectedMovie.title}</p>
          <p><strong>Show:</strong> ${selectedShow.time} (${selectedShow.screen})</p>
          <p><strong>Seats:</strong> ${selectedSeats.join(", ")}</p>
          <p><strong>Snacks:</strong> ${selectedSnacks.map(s => s.name).join(", ") || "None"}</p>
          <h3>Total: ${total} lators</h3>
          <div class="qr-container">
            <img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent("Kumkum Theatre Booking - " + selectedMovie.title)}" alt="QR Code"/>
          </div>
          <p>Scan QR code at theatre entrance!</p>
          <button onclick="goBack()">‚¨Ö Back</button>
        </div>
      `;
    }

    loadWelcome();
  </script>
</body>
</html>
