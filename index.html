<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Kumkum Theatre</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #fff8dc;
      color: #333;
      text-align: center;
    }

    .screen {
      display: none;
      padding: 20px;
    }

    .screen.active {
      display: block;
    }

    button {
      margin: 10px;
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      background: #ff9800;
      color: white;
      font-size: 16px;
      cursor: pointer;
    }

    button.back {
      background: #555;
    }

    .movie-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .movie {
      cursor: pointer;
      border: 2px solid #ccc;
      border-radius: 10px;
      padding: 10px;
      transition: 0.3s;
    }

    .movie:hover {
      transform: scale(1.05);
      border-color: #ff9800;
    }

    .movie img {
      width: 100%;
      border-radius: 10px;
    }

    .show-option {
      margin: 10px;
      padding: 15px;
      border-radius: 10px;
      color: white;
      font-weight: bold;
      cursor: pointer;
    }

    .show-option:hover {
      opacity: 0.8;
    }

    #seatGrid {
      display: grid;
      grid-template-columns: repeat(10, 1fr);
      gap: 8px;
      justify-content: center;
      margin: 20px;
    }

    .seat {
      width: 45px;
      height: 45px;
      border-radius: 6px;
      background: #ddd;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: bold;
    }

    .seat.selected {
      background: #4caf50;
      color: white;
    }

    .seat.recliner {
      background: #ff5722;
      color: white;
    }

    .beverage {
      margin: 10px;
    }

    .beverage input {
      width: 50px;
      margin-left: 10px;
    }

    /* Screen Themes */
    .standard { background: lightblue; }
    .luxe { background: gold; }
    .imax { background: darkblue; }
    .threed { background: red; }
    .fourdx { background: green; }
    .ice { background: #39ff14; color: black; } /* neon green */
  </style>
</head>
<body>
  <div id="app">
    <!-- Screen 1: Welcome -->
    <div class="screen active" id="screen1">
      <h1>Welcome to Kumkum Theatre</h1>
      <button onclick="goToScreen(2)">Continue</button>
    </div>

    <!-- Screen 2: Movie Posters -->
    <div class="screen" id="screen2">
      <h2>Select Your Movie</h2>
      <div class="movie-grid" id="movieGrid"></div>
      <button class="back" onclick="goBack(1)">â¬… Back</button>
    </div>

    <!-- Screen 3: Show Timings & Screens -->
    <div class="screen" id="screen3">
      <h2 id="selectedMovieTitle"></h2>
      <div id="showOptions"></div>
      <button class="back" onclick="goBack(2)">â¬… Back</button>
    </div>

    <!-- Screen 4: Seat Selection -->
    <div class="screen" id="screen4">
      <h2>Select Your Seats</h2>
      <div id="seatGrid"></div>
      <button onclick="confirmSeats()">Confirm Seats</button>
      <button class="back" onclick="goBack(3)">â¬… Back</button>
    </div>

    <!-- Screen 5: Beverages -->
    <div class="screen" id="screen5">
      <h2>Choose Beverages</h2>
      <div id="beverageOptions"></div>
      <button onclick="confirmBeverages()">Continue</button>
      <button class="back" onclick="goBack(4)">â¬… Back</button>
    </div>

    <!-- Screen 6: Confirmation -->
    <div class="screen" id="screen6">
      <h2>Booking Summary</h2>
      <div id="summary"></div>
      <button onclick="finishBooking()">Confirm Booking</button>
      <button class="back" onclick="goBack(5)">â¬… Back</button>
    </div>

    <!-- Screen 7: Thank You -->
    <div class="screen" id="screen7">
      <h1>ðŸŽ‰ Thank you for using Kumkum Theatre!</h1>
      <p>Your booking has been confirmed. Enjoy the show!</p>
    </div>
  </div>

  <script>
    let currentScreen = 1;
    let booking = {
      movie: "",
      time: "",
      screen: "",
      seats: [],
      beverages: {},
      total: 0
    };

    const movies = [
      { title: "JAI BHIM", poster: "https://upload.wikimedia.org/wikipedia/en/c/c3/Jai_Bhim_film_poster.jpg" },
      { title: "DETECTIVE", poster: "https://m.media-amazon.com/images/M/MV5BNzA0YzdlMmItNzI4Yi00NTdiLTg3MTMtYWU2NzNmZDNmZTBlXkEyXkFqcGc@._V1_.jpg" },
      { title: "NAIDUS PADAM", poster: "https://via.placeholder.com/300x450.png?text=Naidus+Padam" },
      { title: "SPY", poster: "https://upload.wikimedia.org/wikipedia/en/f/f4/Spy_2023_poster.jpg" },
      { title: "MAGADI", poster: "https://via.placeholder.com/300x450.png?text=Magadi" }
    ];

    const beverages = {
      "Popcorn": 50,
      "Coca Cola": 40,
      "Pepsi": 40,
      "French Fries": 70,
      "Nachos": 80,
      "Magnum Ice Cream": 100
    };

    function goToScreen(n) {
      document.getElementById(`screen${currentScreen}`).classList.remove("active");
      document.getElementById(`screen${n}`).classList.add("active");
      currentScreen = n;
    }

    function goBack(n) {
      goToScreen(n);
    }

    // Load movies
    window.onload = () => {
      const grid = document.getElementById("movieGrid");
      movies.forEach((m) => {
        const div = document.createElement("div");
        div.className = "movie";
        div.innerHTML = `<img src="${m.poster}" alt="${m.title}"><h3>${m.title}</h3>`;
        div.onclick = () => selectMovie(m.title);
        grid.appendChild(div);
      });
    };

    function selectMovie(title) {
      booking.movie = title;
      document.getElementById("selectedMovieTitle").innerText = `Choose Show for ${title}`;
      const shows = [
        { time: "12:00 PM", screen: "Standard", class: "standard" },
        { time: "3:30 PM", screen: "IMAX", class: "imax" },
        { time: "6:30 PM", screen: "4DX", class: "fourdx" },
        { time: "9:00 PM", screen: "Luxe", class: "luxe" }
      ];
      const container = document.getElementById("showOptions");
      container.innerHTML = "";
      shows.forEach(s => {
        const btn = document.createElement("div");
        btn.className = `show-option ${s.class}`;
        btn.innerText = `${s.time} - ${s.screen}`;
        btn.onclick = () => selectShow(s);
        container.appendChild(btn);
      });
      goToScreen(3);
    }

    function selectShow(show) {
      booking.time = show.time;
      booking.screen = show.screen;
      goToScreen(4);
      loadSeats();
    }

    function loadSeats() {
      const grid = document.getElementById("seatGrid");
      grid.innerHTML = "";
      const rows = ["A","B","C","D","E"];
      for (let r = 0; r < rows.length; r++) {
        for (let c = 1; c <= 10; c++) {
          const seat = document.createElement("div");
          seat.className = "seat";
          const seatId = rows[r] + c;
          seat.innerText = seatId;
          if (r === rows.length - 1) seat.classList.add("recliner"); // last row recliner
          seat.onclick = () => seat.classList.toggle("selected");
          grid.appendChild(seat);
        }
      }
    }

    function confirmSeats() {
      const seats = [...document.querySelectorAll(".seat.selected")].map(s => s.innerText);
      booking.seats = seats;
      goToScreen(5);
      loadBeverages();
    }

    function loadBeverages() {
      const container = document.getElementById("beverageOptions");
      container.innerHTML = "";
      Object.keys(beverages).forEach(b => {
        const div = document.createElement("div");
        div.className = "beverage";
        div.innerHTML = `
          ${b} (${beverages[b]} lators)
          <input type="number" min="0" value="0" id="bev-${b}">
        `;
        container.appendChild(div);
      });
    }

    function confirmBeverages() {
      booking.beverages = {};
      Object.keys(beverages).forEach(b => {
        const qty = parseInt(document.getElementById(`bev-${b}`).value);
        if (qty > 0) booking.beverages[b] = qty;
      });
      calculateTotal();
      showSummary();
      goToScreen(6);
    }

    function calculateTotal() {
      let total = 200 * booking.seats.length; // base price
      booking.seats.forEach(s => {
        if (s.startsWith("E")) total += 100; // recliner extra
      });
      if (booking.screen !== "Standard") total += 370 * booking.seats.length;
      Object.keys(booking.beverages).forEach(b => {
        total += beverages[b] * booking.beverages[b];
      });
      booking.total = total;
    }

    function showSummary() {
      const div = document.getElementById("summary");
      div.innerHTML = `
        <p><b>Movie:</b> ${booking.movie}</p>
        <p><b>Time:</b> ${booking.time}</p>
        <p><b>Screen:</b> ${booking.screen}</p>
        <p><b>Seats:</b> ${booking.seats.join(", ")}</p>
        <p><b>Beverages:</b> ${JSON.stringify(booking.beverages)}</p>
        <p><b>Total:</b> ${booking.total} lators</p>
      `;
    }

    function finishBooking() {
      goToScreen(7);
    }
  </script>
</body>
</html>
