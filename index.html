<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Kumkum Theatre</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #fff9db; /* faint yellow */
      margin: 0;
      padding: 0;
      text-align: center;
    }
    .container {
      max-width: 800px;
      margin: auto;
      padding: 20px;
    }
    h1, h2 {
      margin-bottom: 20px;
    }
    button {
      margin: 10px;
      padding: 10px 20px;
      border: none;
      background: #ff9800;
      color: white;
      font-size: 16px;
      border-radius: 6px;
      cursor: pointer;
    }
    button:hover {
      background: #e68900;
    }
    .screen {
      background: #ccc;
      padding: 10px;
      margin-bottom: 20px;
      border-radius: 6px;
      font-weight: bold;
    }
    .seat-layout {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 20px;
    }
    .row {
      display: flex;
      align-items: center;
      gap: 10px;
      justify-content: center;
    }
    .row-label {
      width: 20px;
      font-weight: bold;
    }
    .row-seats {
      display: grid;
      grid-template-columns: repeat(10, 1fr);
      gap: 5px;
    }
    .seat {
      padding: 10px;
      border-radius: 6px;
      border: 1px solid #333;
      cursor: pointer;
      background: #eee;
      text-align: center;
    }
    .seat.selected {
      background: #4caf50;
      color: white;
    }
    .seat.booked {
      background: #d32f2f;
      color: white;
      cursor: not-allowed;
    }
    .snacks {
      display: flex;
      flex-direction: column;
      gap: 10px;
      align-items: center;
    }
    .snack-item {
      display: flex;
      gap: 10px;
      align-items: center;
    }
    .qr {
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <div id="app" class="container"></div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
  <script>
    const movies = [
      "MARUTHUVAR","HIT","DOOR","DOOR2","SPY",
      "BISTER","THOZHAM","HOSPA","AIM","ONE LIFE",
      "HARBOUR","AUTOKARAN","USPA","USPA2","USPA3","USPA4","HOSARANGA","HOSARANGA2","HOSARANGA3","MAGADI",
      "MUJAHIDEEN","MUJAHIDEEN2","MUJAHIDEEN3",
      "THALAIVA","ALLA RETURNS",
      "FERNANDEZ","VANAKKAM MADURAI",
      "DEVIL","JAI BHIM","DETECTIVE","NAIDUS PADAM"
    ];

    const shows = {
      "MARUTHUVAR": [{time:"12:00", screen:"Standard"}, {time:"15:00", screen:"IMAX"}, {time:"18:00", screen:"3D"}, {time:"21:00", screen:"Standard"}],
      "HIT": [{time:"13:00", screen:"Standard"}, {time:"16:00", screen:"LUXE"}, {time:"19:00", screen:"4DX"}, {time:"22:00", screen:"Standard"}],
      "SPY": [{time:"11:00", screen:"ICE"}, {time:"14:00", screen:"IMAX"}, {time:"17:00", screen:"Standard"}, {time:"20:00", screen:"3D"}],
      "JAI BHIM": [{time:"10:00", screen:"Standard"}, {time:"13:00", screen:"IMAX"}, {time:"16:00", screen:"Standard"}, {time:"19:00", screen:"4DX"}],
      "NAIDUS PADAM": [{time:"12:30", screen:"Standard"}, {time:"15:30", screen:"Standard"}, {time:"18:30", screen:"ICE"}, {time:"21:30", screen:"3D"}],
      // Default for all others
    };

    let state = {
      movie: null,
      show: null,
      seats: [],
      snacks: {},
      total: 0
    };

    function navigate(content) {
      document.getElementById("app").innerHTML = content;
    }

    function start() {
      navigate(`
        <h1>Welcome to Kumkum Theatre</h1>
        <button onclick="chooseMovie()">Continue</button>
      `);
    }

    function chooseMovie() {
      navigate("<h2>Choose Movie</h2>" + movies.map(m => 
        `<button onclick="chooseShow('${m}')">${m}</button>`
      ).join(""));
    }

    function chooseShow(movie) {
      state.movie = movie;
      const movieShows = shows[movie] || [
        {time:"12:00", screen:"Standard"},
        {time:"15:00", screen:"Standard"},
        {time:"18:00", screen:"Standard"},
        {time:"21:00", screen:"Standard"}
      ];
      navigate("<h2>Select Show for "+movie+"</h2>" + movieShows.map(s =>
        `<button onclick="seatSelection('${s.time}','${s.screen}')">${s.time} - ${s.screen}</button>`
      ).join(""));
    }

    function seatSelection(time, screen) {
      state.show = {time, screen};
      state.seats = [];
      navigate(`
        <h2>Select Seats (${screen} - ${time})</h2>
        <div class="screen">SCREEN</div>
        <div class="seat-layout">
          ${["A","B","C","D","E","F"].map(r => `
            <div class="row">
              <span class="row-label">${r}</span>
              <div class="row-seats">
                ${createSeats(r, r=="A"||r=="B"?350:200)}
              </div>
            </div>
          `).join("")}
        </div>
        <button onclick="chooseSnacks()">Continue</button>
      `);
    }

    function createSeats(row, price) {
      let html="";
      for(let i=1;i<=10;i++){
        let id=row+i;
        html+=`<div class="seat" onclick="toggleSeat('${id}',${price},this)">${id}</div>`;
      }
      return html;
    }

    function toggleSeat(id, price, el){
      if(el.classList.contains("booked")) return;
      if(el.classList.contains("selected")){
        el.classList.remove("selected");
        state.seats = state.seats.filter(s=>s.id!==id);
      } else {
        el.classList.add("selected");
        state.seats.push({id, price});
      }
    }

    function chooseSnacks(){
      navigate(`
        <h2>Select Snacks</h2>
        <div class="snacks">
          ${["Popcorn","Coca Cola","Pepsi","French Fries","Nachos","Magnum Ice Cream"].map(item=>`
            <div class="snack-item">
              <label>${item}</label>
              <input type="number" min="0" value="0" id="snack-${item}">
            </div>
          `).join("")}
        </div>
        <button onclick="confirmBooking()">Confirm</button>
      `);
    }

    function confirmBooking(){
      let snackTotal=0;
      state.snacks={};
      ["Popcorn","Coca Cola","Pepsi","French Fries","Nachos","Magnum Ice Cream"].forEach(item=>{
        let qty=parseInt(document.getElementById("snack-"+item).value)||0;
        if(qty>0){
          state.snacks[item]=qty;
          snackTotal+=qty*100;
        }
      });
      let seatTotal=state.seats.reduce((sum,s)=>sum+s.price,0);
      state.total=seatTotal+snackTotal;
      let qrData=`Movie: ${state.movie}, Show: ${state.show.time} ${state.show.screen}, Seats: ${state.seats.map(s=>s.id).join(",")}, Total: ${state.total} lators`;
      navigate(`
        <h2>Confirmation</h2>
        <p>Movie: ${state.movie}</p>
        <p>Show: ${state.show.time} - ${state.show.screen}</p>
        <p>Seats: ${state.seats.map(s=>s.id).join(", ")}</p>
        <p>Total: ${state.total} lators</p>
        <canvas id="qr"></canvas>
        <br><button onclick="start()">Restart</button>
      `);
      let qr=new QRious({element:document.getElementById("qr"),value:qrData,size:200});
    }

    start();
  </script>
</body>
</html>
